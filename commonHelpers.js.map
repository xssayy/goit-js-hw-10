{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst btn = document.querySelector('[data-start]');\nbtn.classList.add('calendar-btn');\nbtn.disabled = true;\nconst input = document.querySelector('#datetime-picker');\ninput.classList.add('calendar');\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onChange(selectedDates) {\n    if (Date.now() < selectedDates[0].getTime()) {\n      btn.disabled = false;\n      userSelectedDate = selectedDates[0];\n    } else {\n      btn.disabled = true;\n    }\n    console.log(selectedDates[0].getTime());\n  },\n  onClose(selectedDates) {\n    if (Date.now() > selectedDates[0].getTime()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n    } else if (Date.now() < selectedDates[0].getTime()) {\n      btn.addEventListener('click', () => {\n        startTimer(selectedDates[0]);\n      });\n    }\n  },\n};\nflatpickr(input, options);\n\nfunction startTimer(chosenDate) {\n  const days = document.querySelector('[data-days]');\n  const hours = document.querySelector('[data-hours]');\n  const minutes = document.querySelector('[data-minutes]');\n  const seconds = document.querySelector('[data-seconds]');\n\n  const intervalId = setInterval(() => {\n    const {\n      days: daysValue,\n      hours: hoursValue,\n      minutes: minutesValue,\n      seconds: secondsValue,\n    } = convertMs(chosenDate.getTime() - Date.now());\n\n    days.textContent = `${daysValue}`.padStart(2, '0');\n    hours.textContent = `${hoursValue}`.padStart(2, '0');\n    minutes.textContent = `${minutesValue}`.padStart(2, '0');\n    seconds.textContent = `${secondsValue}`.padStart(2, '0');\n    function timeIsUp() {\n      const result =\n        parseInt(days.textContent) === 0 &&\n        parseInt(hours.textContent) === 0 &&\n        parseInt(minutes.textContent) === 0 &&\n        parseInt(seconds.textContent) === 0;\n      return result;\n    }\n    function stopTimer() {\n      clearInterval(intervalId);\n    }\n    if (timeIsUp() === true) {\n      stopTimer();\n    }\n  }, 1000);\n\n  btn.disabled = true;\n  input.disabled = true;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["btn","input","options","selectedDates","iziToast","startTimer","flatpickr","chosenDate","days","hours","minutes","seconds","intervalId","daysValue","hoursValue","minutesValue","secondsValue","convertMs","timeIsUp","stopTimer","ms"],"mappings":"+IAMA,MAAMA,EAAM,SAAS,cAAc,cAAc,EACjDA,EAAI,UAAU,IAAI,cAAc,EAChCA,EAAI,SAAW,GACf,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EACvDA,EAAM,UAAU,IAAI,UAAU,EAI9B,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAASC,EAAe,CAClB,KAAK,IAAK,EAAGA,EAAc,GAAG,WAChCH,EAAI,SAAW,GACIG,EAAc,IAEjCH,EAAI,SAAW,GAEjB,QAAQ,IAAIG,EAAc,GAAG,QAAS,CAAA,CACvC,EACD,QAAQA,EAAe,CACjB,KAAK,IAAK,EAAGA,EAAc,GAAG,UAChCC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAClB,CAAO,EACQ,KAAK,IAAK,EAAGD,EAAc,GAAG,WACvCH,EAAI,iBAAiB,QAAS,IAAM,CAClCK,EAAWF,EAAc,EAAE,CACnC,CAAO,CAEJ,CACH,EACAG,EAAUL,EAAOC,CAAO,EAExB,SAASG,EAAWE,EAAY,CAC9B,MAAMC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAa,YAAY,IAAM,CACnC,KAAM,CACJ,KAAMC,EACN,MAAOC,EACP,QAASC,EACT,QAASC,CACf,EAAQC,EAAUV,EAAW,QAAS,EAAG,KAAK,IAAG,CAAE,EAE/CC,EAAK,YAAc,GAAGK,IAAY,SAAS,EAAG,GAAG,EACjDJ,EAAM,YAAc,GAAGK,IAAa,SAAS,EAAG,GAAG,EACnDJ,EAAQ,YAAc,GAAGK,IAAe,SAAS,EAAG,GAAG,EACvDJ,EAAQ,YAAc,GAAGK,IAAe,SAAS,EAAG,GAAG,EACvD,SAASE,GAAW,CAMlB,OAJE,SAASV,EAAK,WAAW,IAAM,GAC/B,SAASC,EAAM,WAAW,IAAM,GAChC,SAASC,EAAQ,WAAW,IAAM,GAClC,SAASC,EAAQ,WAAW,IAAM,CAErC,CACD,SAASQ,GAAY,CACnB,cAAcP,CAAU,CACzB,CACGM,EAAU,IAAK,IACjBC,GAEH,EAAE,GAAI,EAEPnB,EAAI,SAAW,GACfC,EAAM,SAAW,EACnB,CAEA,SAASgB,EAAUG,EAAI,CAQrB,MAAMZ,EAAO,KAAK,MAAMY,EAAK,KAAG,EAE1BX,EAAQ,KAAK,MAAOW,EAAK,MAAO,IAAI,EAEpCV,EAAU,KAAK,MAAQU,EAAK,MAAO,KAAQ,GAAM,EAEjDT,EAAU,KAAK,MAASS,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAZ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}